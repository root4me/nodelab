<!doctype html>
<html class="no-js" lang="en">
    
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"
        />
        <title>Image Magic with foundation | Welcome</title>
        <!-- build:css css/scroll.min.css
        -->
        <link rel="stylesheet" href="css/scroll.css" />
        <!-- /build -->
        <!-- build:css css/foundation.min.css -->
        <link rel="stylesheet" href="../bower_components/foundation/css/foundation.css"
        />
        <!-- /build -->
        <!-- build:js js/modernizr.min.js -->
        <script src="../bower_components/foundation/js/vendor/modernizr.js"></script>
        <!-- /build -->
        <style>
            /*
	Demo Styles: NOT REQUIRED
*/
#pinned-element2:after {
	content: "â†§";
	font-size: 30px;
}
        </style>
    </head>
    
    <body>
        <header role="banner">
            <img src="img/demo_tophat.png" width="64" height="auto" alt="scroll magic">
        </header>
        <main role="main" class="full-screen">
            <section id="pinned-trigger2" class="full-screen blue">
                <div id="pinned-element2">
                    <h1>Hello !</h1>
                    <p>Scroll down ..... </p>
                </div>
            </section>
            <section id="pinned-trigger30" class="full-screen white">
                <div id="pinned-element30">
                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                </div>
                
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
              
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>  
                
                
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                <div id="pinned-trigger3">t.t.t.t.t</div>
                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
             
                                             <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                
                                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
                
                                                <div class="row">
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                    <div class="large-6 medium-6 columns">
                        <div class="callout panel">
                            <p>Six columns</p>
                        </div>
                    </div>
                </div>
                
        <div id="content">
			
		</div>
		<div id="loader">
			LOADING...
		</div>
		
            </section>


        </main>
        <!-- build:js js/jquery.min.js -->
        <script src="../bower_components/jquery/dist/jquery.js"></script>
        <!-- /build -->
        <!-- build:js js/foundation.min.js -->
        <script src="../bower_components/foundation/js/foundation/foundation.js"></script>
        <!-- /build -->
        <!-- build:js js/TweenMax.min.js -->
        <script src="../bower_components/gsap/src/uncompressed/TweenMax.js"></script>
        <!-- /build -->
        <!-- build:js js/jquery.scrollmagic.min.js -->
        <script src="../bower_components/ScrollMagic/js/jquery.scrollmagic.js"></script>
        <!-- /build -->
        <script>
            $(document).foundation();
            $(document).ready(function($) {

                // init ScrollMagic Controller
                controller = new ScrollMagic();

                // Scene Handler
                var scene = new ScrollScene({
                    triggerElement: "#pinned-trigger1", // point of execution
                    duration: $(window).height() - 200, // pin element for the window height - 1
                    triggerHook: 0, // don't trigger until #pinned-trigger1 hits the top of the viewport
                    reverse: true // allows the effect to trigger when scrolled in the reverse direction
                }).setPin("#pinned-element1"); // the element we want to pin

                // Scene2 Handler
                var scene2 = new ScrollScene({
                    triggerElement: "#pinned-trigger2", // point of execution
                    duration: 500, // pin the element for a total of 400px
                    reverse: true
                }).setPin("#pinned-element2").on("enter", function(e){

    // ajax call to get next set
    // hide/push down existing pin trigger
    console.log(e);
    }); // the element we want to pin

var scene3 = new ScrollScene({
    triggerElement: "#pinned-trigger3",

}).on("enter", function(e){
    console.log('here');
    // ajax call to get next set
    // hide/push down existing pin trigger
    console.log(e);
    e.currentTarget.remove();
    });


				var scene4 = new ScrollScene({triggerElement: "#loader", triggerHook: "onEnter"})
								.addTo(controller)
								.on("start", function (e) {
								    console.log('1');
									if (!$("#loader").hasClass("active")) {
										$("#loader").addClass("active");
										if (console){
											console.log("loading new items");
										}
										// simulate ajax call to add content using the function below
										//setTimeout(addBoxes, 1500, 9);
										
										$.ajax({
                                              url: "test.html",
                                              cache: false
                                            })
                                              .done(function( html ) {
                                                $( "#content" ).append( html );
                                                scene.update();
                                                $("#loader").removeClass("active");
                                              });
									}
								});

				// pseudo function to add new content. In real life it would be done through an ajax request.
				function addBoxes (amount) {
					for (i=1; i<=amount; i++) {
					    console.log('ffff');
						var randomColor = '#'+('00000'+(Math.random()*0xFFFFFF<<0).toString(16)).slice(-6);
						$("<div></div>")
							.addClass("box1")
							.css("background-color", randomColor)
							.appendTo("#content");
					}
					// "loading" done -> revert to normal state
					scene.update(); // make sure the scene gets the new start position
					$("#loader").removeClass("active");
				}


                // Add Scenes to ScrollMagic Controller
                controller.addScene([
                scene,
                scene2,
                scene3,
                scene4]);
                

            });
        </script>
    </body>

</html>
