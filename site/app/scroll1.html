<!doctype html>
<html class="no-js" lang="en">
    
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"
        />
        <title>Image Magic with foundation | Welcome</title>
        <!-- build:css css/scroll.min.css
        -->
        <link rel="stylesheet" href="css/scroll.css" />
        <!-- /build -->
        <!-- build:css css/foundation.min.css -->
        <link rel="stylesheet" href="../bower_components/foundation/css/foundation.css"
        />
        <!-- /build -->
        <!-- build:js js/modernizr.min.js -->
        <script src="../bower_components/foundation/js/vendor/modernizr.js"></script>
        <!-- /build -->
        <style>
            /*
	Demo Styles: NOT REQUIRED
*/
            .downarrow:after {
                content:'\21A1';
                font-size: 30px;
            }
        </style>
    </head>
    
    <body>
        <header role="banner">
            <img src="img/demo_tophat.png" width="64" height="auto" alt="scroll magic">
        </header>
        <main role="main" class="full-screen">
            <section id="pinned-trigger2" class="full-screen blue">
                <div id="pinned-element2">
                    <h1>Hello !</h1>
                    <p>Scroll down .....</p>
                    <p class="downarrow"></p>
                </div>
            </section>
            <section class="full-screen white">
                <div>
                    <div class="row">
                        <div class="large-6 medium-6 columns">
                            <div class="panel">
                                <p>Six columns</p>
                            </div>
                        </div>
                        <div class="large-6 medium-6 columns">
                            <div class="callout panel">
                                <p>Six columns</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="content"></div>
                <div id="loader">LOADING...</div>
            </section>
        </main>
        <!-- build:js js/jquery.min.js -->
        <script src="../bower_components/jquery/dist/jquery.js"></script>
        <!-- /build -->
        <!-- build:js js/foundation.min.js -->
        <script src="../bower_components/foundation/js/foundation/foundation.js"></script>
        <!-- /build -->
        <!-- build:js js/TweenMax.min.js -->
        <script src="../bower_components/gsap/src/uncompressed/TweenMax.js"></script>
        <!-- /build -->
        <!-- build:js js/jquery.scrollmagic.min.js -->
        <script src="../bower_components/ScrollMagic/js/jquery.scrollmagic.js"></script>
        <!-- /build -->
        <script>
            $(document).foundation();
            $(document).ready(function($) {

                // init ScrollMagic Controller
                controller = new ScrollMagic();


                // Scene2 Handler
                var scene2 = new ScrollScene({
                    triggerElement: "#pinned-trigger2", // point of execution
                    duration: ($(window).height() / 2) + 100, // pin the element for a total of 400px
                    reverse: true
                }).setPin("#pinned-element2").on("enter", function(e) {

                    // ajax call to get next set
                    // hide/push down existing pin trigger
                    console.log($(window).height() / 2);
                    console.log(e);
                }); // the element we want to pin


                var scene4 = new ScrollScene({
                    triggerElement: "#loader",
                    triggerHook: "onEnter"
                }).addTo(controller).on("start", function(e) {
                    console.log('1');
                    if (!$("#loader").hasClass("active")) {
                        $("#loader").addClass("active");
                        if (console) {
                            console.log("loading new items");
                        }
                        // simulate ajax call to add content using the function below
                        //setTimeout(addBoxes, 1500, 9);

                        $.ajax({
                            url: "test.html",
                            cache: false
                        }).done(function(html) {
                            $("#content").append(html);
                            scene4.update();
                            $("#loader").removeClass("active");
                        });
                    }
                });


                // Add Scenes to ScrollMagic Controller
                controller.addScene([
                scene2,
                scene4]);


            });
        </script>
    </body>

</html>
